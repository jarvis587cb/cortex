### Cortex API Tests
### Für VS Code REST Client Extension oder IntelliJ HTTP Client

@baseUrl = http://localhost:9123
@apiKey = your-secret-key-here
@appId = openclaw
@userId = default

### ============================================
### Health Check (keine Auth erforderlich)
### ============================================

GET {{baseUrl}}/health

### ============================================
### Neutron-kompatible Seeds API
### ============================================

### Memory speichern (Seeds-API)
POST {{baseUrl}}/seeds
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "appId": "{{appId}}",
  "externalUserId": "{{userId}}",
  "content": "Der Nutzer mag Kaffee mit Hafermilch",
  "metadata": {
    "tags": ["preferences", "coffee"],
    "source": "test"
  }
}

### Memory-Suche (Seeds-API)
POST {{baseUrl}}/seeds/query
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "appId": "{{appId}}",
  "externalUserId": "{{userId}}",
  "query": "Kaffee",
  "limit": 5
}

### Memory löschen (Seeds-API)
### Ersetze {id} mit einer tatsächlichen Memory-ID
DELETE {{baseUrl}}/seeds/1?appId={{appId}}&externalUserId={{userId}}
Authorization: Bearer {{apiKey}}

### ============================================
### Cortex API (Original)
### ============================================

### Erinnerung speichern
POST {{baseUrl}}/remember
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "content": "Der Nutzer mag Kaffee mit Hafermilch",
  "type": "semantic",
  "entity": "user:jarvis",
  "tags": "preference,coffee",
  "importance": 7
}

### Erinnerungen abrufen
GET {{baseUrl}}/recall?q=Kaffee&limit=5
Authorization: Bearer {{apiKey}}

### Erinnerungen nach Typ abrufen
GET {{baseUrl}}/recall?type=semantic&limit=10
Authorization: Bearer {{apiKey}}

### Fakt für Entity setzen
POST {{baseUrl}}/entities?entity=user:jarvis
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "key": "favorite_coffee",
  "value": "Latte mit Hafermilch"
}

### Entity abrufen
GET {{baseUrl}}/entities?name=user:jarvis
Authorization: Bearer {{apiKey}}

### Alle Entities auflisten
GET {{baseUrl}}/entities
Authorization: Bearer {{apiKey}}

### Relation hinzufügen
POST {{baseUrl}}/relations
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "from": "user:jarvis",
  "to": "user:alice",
  "type": "friend"
}

### Relationen abrufen
GET {{baseUrl}}/relations?entity=user:jarvis
Authorization: Bearer {{apiKey}}

### Alle Relationen abrufen
GET {{baseUrl}}/relations
Authorization: Bearer {{apiKey}}

### Statistiken abrufen
GET {{baseUrl}}/stats
Authorization: Bearer {{apiKey}}

### ============================================
### Tests ohne Authentifizierung (Development)
### ============================================

### Health Check (immer öffentlich)
GET {{baseUrl}}/health

### Memory speichern ohne Auth (wenn CORTEX_API_KEY nicht gesetzt)
POST {{baseUrl}}/seeds
Content-Type: application/json

{
  "appId": "{{appId}}",
  "externalUserId": "{{userId}}",
  "content": "Test ohne Authentifizierung",
  "metadata": {}
}

### ============================================
### Fehler-Tests
### ============================================

### Ungültiger Request (fehlendes Content)
POST {{baseUrl}}/seeds
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "appId": "{{appId}}",
  "externalUserId": "{{userId}}"
}

### Ungültige ID beim Löschen
DELETE {{baseUrl}}/seeds/999999?appId={{appId}}&externalUserId={{userId}}
Authorization: Bearer {{apiKey}}

### Ungültige Methode
PUT {{baseUrl}}/seeds
Authorization: Bearer {{apiKey}}

### Fehlende Query-Parameter
GET {{baseUrl}}/entities
Authorization: Bearer {{apiKey}}
